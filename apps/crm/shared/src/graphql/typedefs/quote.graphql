# eslint-disable @graphql-eslint/require-description
# lint-disable-line relay-page-info-spec
# lint-disable types-have-descriptions, fields-have-descriptions

type Query {
  quote(input: QuoteInput!): QuoteDetailed!
  quotesOverview(input: QuotesOverviewInput!): QuotesOverviewPaginated!
}

type Mutation {
  createQuote(input: CreateQuoteInput!): Quote!
  updateQuote(input: UpdateQuoteInput!): Quote!
  removeQuote(input: RemoveQuoteInput!): UUID!
  createQuoteService(input: CreateQuoteServiceInput!): QuoteService!
  updateQuoteService(input: UpdateQuoteServiceInput!): QuoteService!
  removeQuoteService(input: RemoveQuoteServiceInput!): UUID!
  updateQuoteNote(input: UpdateQuoteNoteInput!): QuoteNote!
}

type Quote {
  id: UUID!
  title: String!
  company: Company!
  total: Money!
  salesTax: Float!
  stage: QuoteStage!
  preparedFor: Contact!
  preparedBy: UserProfile!
  issuedAt: DateTime
  dueAt: DateTime
}

type QuoteDetailed {
  id: UUID!
  title: String!
  company: Company!
  total: Money!
  salesTax: Float!
  stage: QuoteStage!
  preparedFor: Contact!
  preparedBy: UserProfile!
  issuedAt: DateTime
  dueAt: DateTime
  services: [QuoteService!]!
  note: QuoteNote!
}

type QuoteOverview {
  id: UUID!
  title: String!
  company: Company!
  total: Money!
  stage: QuoteStage!
  preparedFor: Contact!
  preparedBy: UserProfile!
  createdAt: DateTime!
}

type QuotesOverviewPaginated {
  id: ID!
  items: [QuoteOverview!]!
  totalCount: Int!
}

type QuoteService {
  id: UUID!
  title: String!
  price: Money!
  quantity: Int!
  discount: Float!
  total: Money!
}

type QuoteNote {
  id: UUID!
  note: String!
}

input QuoteInput {
  id: UUID!
}

input QuotesOverviewInput {
  filters: QuotesOverviewFiltersInput
  sort: QuotesOverviewSortInput
  pagination: QuotesOverviewPaginationInput
}

input QuotesOverviewFiltersInput {
  searchQuoteTitle: String
  searchCompanyName: String
  searchStage: QuoteStage
  searchPreparedBy: String
}

input QuotesOverviewSortInput {
  sort: [QuoteOverviewSort]!
}

input QuoteOverviewSort {
  field: QuoteSortableField!
  direction: SortDirection
}

input QuotesOverviewPaginationInput {
  id: UUID
}

input CreateQuoteInput {
  title: String!
  company: UUID!
  preparedFor: UUID!
  preparedBy: UUID!
}

input UpdateQuoteInput {
  id: UUID!
  title: String
  company: UUID
  preparedFor: UUID
  preparedBy: UUID
  stage: QuoteStage
}

input RemoveQuoteInput {
  id: UUID!
}

input UpdateQuoteNoteInput {
  id: UUID!
  note: String
}

input CreateQuoteServiceInput {
  title: String!
  price: MoneyInput!
  quantity: Int!
  discount: Float!
  total: MoneyInput!
}

input UpdateQuoteServiceInput {
  id: UUID!
  title: String!
  price: MoneyInput!
  quantity: Int!
  discount: Float!
  total: MoneyInput!
}

input RemoveQuoteServiceInput {
  id: UUID!
}

enum QuoteStage {
  DRAFT
  SENT
  ACCEPTED
}

enum QuoteSortableField {
  AMOUNT
  CREATED_AT
}
