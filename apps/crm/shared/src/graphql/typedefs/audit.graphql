# eslint-disable @graphql-eslint/require-description
# lint-disable-line relay-page-info-spec
# lint-disable types-have-descriptions, fields-have-descriptions

type Query {
  audit(input: AuditInput!): Audit!
  auditOverview(input: AuditOverviewInput!): AuditOverviewPaginated!
}

type Audit {
  id: UUID!
  entityId: UUID!
  entityAction: AuditAction!
  changedAt: DateTime!
  changedBy: UserProfile!
  originalValues: JSON
  newValues: JSON
}

type AuditOverviewPaginated {
  id: ID!
  items: [AuditOverview!]!
  totalCount: Int!
}

type AuditOverview {
  id: UUID!
  user: UserProfile!
  action: AuditAction!
  entityId: UUID!
  changedAt: DateTime!
}

input AuditInput {
  id: UUID!
}

input AuditOverviewInput {
  filters: AuditOverviewFiltersInput
  sort: AuditOverviewSortInput
  pagination: PaginationInput
}

input AuditOverviewFiltersInput {
  searchUser: String
  searchAction: AuditAction
  dateAndTime: String
}

input AuditOverviewSortInput {
  sort: [AuditOverviewSort]!
}

input AuditOverviewSort {
  field: AuditSortableField!
  direction: SortDirection
}

enum AuditAction {
  INSERT
  UPDATE
  DELETE
}

enum AuditSortableField {
  DATE_AND_TIME
}
