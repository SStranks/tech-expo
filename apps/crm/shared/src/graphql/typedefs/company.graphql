# eslint-disable @graphql-eslint/require-description
# lint-disable-line relay-page-info-spec

type Query {
  company(input: CompanyInput!): CompanyDetailed!
  companiesOverview(input: CompaniesOverviewInput!): CompaniesOverviewPaginated!
}

type Mutation {
  createCompany(input: CreateCompanyInput!): Company!
  updateCompany(input: UpdateCompanyInput!): Company!
  removeCompany(input: RemoveCompanyInput!): UUID!
  createCompanyNote(input: CreateCompanyNoteInput!): CompanyNotePayload!
  updateCompanyNote(input: UpdateCompanyNoteInput!): CompanyNotePayload!
  removeCompanyNote(input: RemoveCompanyNoteInput!): UUID!
}

type Company {
  id: UUID!
  name: String!
  size: CompanySize!
  totalRevenue: Money!
  industry: String!
  businessType: BusinessType!
  country: Country!
  website: String
}

type CompanyNotePayload {
  id: ID!
  company: Company!
  companyNote: CompanyNote!
}

type CompaniesOverviewPaginated {
  id: ID!
  items: [CompanyOverview!]!
  totalCount: Int!
}

type CompanyOverview {
  id: UUID!
  name: String!
  salesOwner: UserAvatar!
  openDealsAmount: Money!
  relatedContacts(limit: Int = 5, offset: Int = 0): CompanyOverviewContacts!
}

type CompanyOverviewContacts {
  id: ID!
  items: [ContactAvatar!]!
  totalCount: Int!
}

type CompanyDetailed {
  id: UUID!
  name: String!
  size: CompanySize!
  totalRevenue: Money!
  industry: String!
  businessType: BusinessType!
  country: Country!
  website: String
  salesOwner: UserProfile!
  contacts(pagination: PaginationInput): CompanyPaginatedContactSummary!
  deals(pagination: PaginationInput): CompanyPaginatedDealSummary!
  quotes(pagination: PaginationInput): CompanyPaginatedQuoteSummary!
  notes: [CompanyNote!]!
}

type CompanyPaginatedContactSummary {
  id: ID!
  items: [CompanyContactSummary!]!
  totalCount: Int!
}

type CompanyContactSummary {
  id: UUID!
  firstName: String!
  lastName: String!
  jobTitle: String!
  stage: String!
  image: String
}

type CompanyPaginatedDealSummary {
  id: ID!
  items: [CompanyDealSummary!]!
  totalCount: Int!
}

type CompanyDealSummary {
  id: UUID!
  title: String!
  value: String!
  stage: String!
}

type CompanyPaginatedQuoteSummary {
  id: ID!
  items: [CompanyQuoteSummary!]!
  totalCount: Int!
}

type CompanyQuoteSummary {
  id: UUID!
  title: String!
  totalAmount: Money!
  stage: String!
  preparedFor: ContactAvatar!
  preparedBy: UserAvatar!
}

type CompanyNote {
  id: UUID!
  note: String!
  createdAt: DateTime!
  createdBy: UserAvatar!
}

input CompanyInput {
  id: UUID!
}

input CompaniesOverviewInput {
  filters: CompaniesOverviewFiltersInput
  pagination: PaginationInput
}

input CompaniesOverviewFiltersInput {
  searchCompanyName: String
  salesOwnerId: UUID
  contactIds: [UUID!]
}

input CreateCompanyInput {
  name: String!
  size: CompanySize!
  industry: String!
  businessType: BusinessType!
  totalRevenue: String
  countryId: UUID!
  website: String
}

input UpdateCompanyInput {
  id: UUID!
  name: String
  size: CompanySize
  industry: String
  businessType: BusinessType
  totalRevenue: String
  countryId: UUID
  website: String
}

input RemoveCompanyInput {
  id: UUID!
}

input CreateCompanyNoteInput {
  companyId: UUID!
  note: String!
}

input UpdateCompanyNoteInput {
  companyId: UUID!
  companyNoteId: UUID!
  note: String
}

input RemoveCompanyNoteInput {
  companyId: UUID!
  companyNoteId: UUID!
}

enum CompanySize {
  MICRO
  SMALL
  MEDIUM
  LARGE
}

enum BusinessType {
  B2B
  B2C
}
